# Column Configuration
# Combines display names and render settings for automatic column formatting
#
# Structure:
#   columns:       Global column patterns (apply to all tables)
#   tables:        Table-specific overrides
#
# Render types:
#   text:     Plain text (default)
#   number:   Formatted number with locale separators
#   currency: Number with currency symbol (DOT, USD, USDC, USDT)
#   date:     Date/datetime formatting
#   badge:    Status badge with color variants
#   link:     Clickable link to external URL
#   address:  Blockchain address with truncation

columns:
  # Currency columns with custom display names
  DOT_latest:
    displayName: "DOT Value"
    render: currency
    currency: DOT
    decimals: 0

  DOT_proposal_time:
    displayName: "DOT (at Proposal)"
    render: currency
    currency: DOT
    decimals: 0

  USD_latest:
    displayName: "USD Value"
    render: currency
    currency: USD
    decimals: 0

  USD_proposal_time:
    displayName: "USD (at Proposal)"
    render: currency
    currency: USD
    decimals: 0

  # Date columns with custom display names
  latest_status_change:
    displayName: "Date"
    render: date
    format: date

  validFrom:
    displayName: "Valid From"
    render: date
    format: date

  expireAt:
    displayName: "Expires"
    render: date
    format: date

  # Computed time columns
  year:
    displayName: "Year"
    render: text

  year_month:
    displayName: "Month"
    render: text

  year_quarter:
    displayName: "Quarter"
    render: text

  # Reference/link columns
  referendumIndex:
    displayName: "Ref #"
    render: link
    urlTemplate: "https://polkadot.subsquare.io/referenda/{value}"

  parentBountyId:
    displayName: "Parent Bounty"
    render: link
    urlTemplate: "https://polkadot.subsquare.io/treasury/bounties/{value}"

  # Count/number columns
  registeredCount:
    displayName: "Registered"
    render: number
    decimals: 0

  registeredPaidCount:
    displayName: "Paid"
    render: number
    decimals: 0

  rank:
    displayName: "Rank"
    render: number
    decimals: 0

  cycle:
    displayName: "Cycle"
    render: number
    decimals: 0

  # Tally columns with custom display names
  tally.ayes:
    displayName: "Ayes"
    render: number
    decimals: 0
    color: green

  tally.nays:
    displayName: "Nays"
    render: number
    decimals: 0
    color: red

  # Days columns
  days_until_expiry:
    displayName: "Days Until Expiry"
    render: number
    decimals: 0

  days_until_valid:
    displayName: "Days Until Valid"
    render: number
    decimals: 0

  days_since_expiry:
    displayName: "Days Since Expiry"
    render: number
    decimals: 0

# Table-specific overrides
tables:
  all_spending:
    id:
      displayName: "ID"
      render: text

    title:
      displayName: "Description"
      render: link
      urlField: url

    type:
      displayName: "Spending Type"
      render: badge
      variants:
        Direct Spend: default
        Bounty Child: secondary
        Claim: outline
        default: outline

  referenda:
    id:
      displayName: "Ref #"
      render: link
      urlTemplate: "https://polkadot.subsquare.io/referenda/{value}"

    title:
      render: link
      urlField: url

    track:
      displayName: "Track"
      render: badge
      variants:
        default: outline

  treasury:
    id:
      displayName: "Spend #"
      render: link
      urlTemplate: "https://polkadot.subsquare.io/treasury/spends/{value}"

    title:
      render: link
      urlField: url

  child-bounties:
    identifier:
      displayName: "ID"
      render: text

    title:
      render: link
      urlField: url

  fellowship:
    id:
      displayName: "Ref #"
      render: link
      urlTemplate: "https://collectives.subsquare.io/fellowship/referenda/{value}"

    title:
      render: link
      urlField: url

  outstanding_claims:
    id:
      displayName: "Spend #"
      render: link
      urlTemplate: "https://polkadot.subsquare.io/treasury/spends/{value}"

  expired_claims:
    id:
      displayName: "Spend #"
      render: link
      urlTemplate: "https://polkadot.subsquare.io/treasury/spends/{value}"

# Pattern-based auto-detection (fallback when no explicit config exists)
# Patterns are evaluated in order, first match wins
# Pattern types: exact, prefix, suffix, substring
# Options: caseInsensitive (default: false)
patterns:
  # Currency patterns - prefix matching
  - match: prefix
    pattern: "DOT_"
    config:
      render: currency
      currency: DOT
      decimals: 0

  - match: prefix
    pattern: "USD_"
    config:
      render: currency
      currency: USD
      decimals: 0

  - match: prefix
    pattern: "USDC_"
    config:
      render: currency
      currency: USDC
      decimals: 0

  - match: prefix
    pattern: "USDT_"
    config:
      render: currency
      currency: USDT
      decimals: 0

  # Tally patterns - suffix matching (case-insensitive)
  - match: suffix
    pattern: ".ayes"
    caseInsensitive: true
    config:
      render: number
      color: green
      decimals: 0

  - match: suffix
    pattern: ".nays"
    caseInsensitive: true
    config:
      render: number
      color: red
      decimals: 0

  # Date patterns - substring matching (case-insensitive)
  - match: substring
    pattern: "_time"
    caseInsensitive: true
    config:
      render: date
      format: date

  - match: substring
    pattern: "_date"
    caseInsensitive: true
    config:
      render: date
      format: date

  # Special date field - exact matching
  - match: exact
    pattern: "createdat"
    caseInsensitive: true
    config:
      render: date
      format: date

  # Status patterns - exact and suffix matching
  - match: exact
    pattern: "status"
    caseInsensitive: true
    config:
      render: badge
      variants:
        Executed: success
        Approved: success
        Paid: success
        Rejected: destructive
        Cancelled: destructive
        Expired: destructive
        default: outline

  - match: suffix
    pattern: "_status"
    caseInsensitive: true
    config:
      render: badge
      variants:
        Executed: success
        Approved: success
        Paid: success
        Rejected: destructive
        Cancelled: destructive
        Expired: destructive
        default: outline

  # Address patterns - exact matching
  - match: exact
    pattern: "beneficiary"
    caseInsensitive: true
    config:
      render: address
      truncate: true

  - match: exact
    pattern: "address"
    caseInsensitive: true
    config:
      render: address
      truncate: true

  - match: exact
    pattern: "who"
    caseInsensitive: true
    config:
      render: address
      truncate: true

  - match: suffix
    pattern: "_address"
    caseInsensitive: true
    config:
      render: address
      truncate: true

  # Non-standard DOT columns (exact matches for tables without DOT_ prefix)
  - match: exact
    pattern: "DOT"
    config:
      render: currency
      currency: DOT
      decimals: 0

  - match: exact
    pattern: "registered_amount_dot"
    caseInsensitive: true
    config:
      render: currency
      currency: DOT
      decimals: 0

  - match: exact
    pattern: "attempt_amount_dot"
    caseInsensitive: true
    config:
      render: currency
      currency: DOT
      decimals: 0

  # Non-standard USDC columns (exact matches for tables without USDC_ prefix)
  - match: exact
    pattern: "budget_usdc"
    caseInsensitive: true
    config:
      render: currency
      currency: USDC
      decimals: 0

  - match: exact
    pattern: "registered_paid_amount_usdc"
    caseInsensitive: true
    config:
      render: currency
      currency: USDC
      decimals: 0

  - match: exact
    pattern: "total_registrations_usdc"
    caseInsensitive: true
    config:
      render: currency
      currency: USDC
      decimals: 0

  - match: exact
    pattern: "unregistered_paid_usdc"
    caseInsensitive: true
    config:
      render: currency
      currency: USDC
      decimals: 0

  - match: exact
    pattern: "registered_amount_usdc"
    caseInsensitive: true
    config:
      render: currency
      currency: USDC
      decimals: 0

  - match: exact
    pattern: "attempt_amount_usdc"
    caseInsensitive: true
    config:
      render: currency
      currency: USDC
      decimals: 0

  - match: exact
    pattern: "amount_usdc"
    caseInsensitive: true
    config:
      displayName: "Paid USDC"
      render: currency
      currency: USDC
      decimals: 0

  - match: exact
    pattern: "salary_usdc"
    caseInsensitive: true
    config:
      render: currency
      currency: USDC
      decimals: 0

  - match: exact
    pattern: "amount_dot"
    caseInsensitive: true
    config:
      displayName: "Paid DOT Equivalent"
      render: currency
      currency: DOT
      decimals: 2
